# Baseline Lens CLI Integration

Complete guide to using the Baseline Lens VS Code Extension with the Baseline Lens CLI for enhanced development workflows.

## Overview

The Baseline Lens VS Code Extension and CLI work together to provide a comprehensive web compatibility solution:

- **Extension**: Real-time analysis, inline indicators, and VS Code integration
- **CLI**: Project-wide analysis, CI/CD integration, and automation tools
- **Together**: Enhanced features and seamless workflow integration

## Installation

### Extension Only
```bash
# Install from VS Code Marketplace
code --install-extension baseline-lens.baseline-lens
```

### CLI Only
```bash
# Install globally via npm
npm install -g baseline-lens-cli
```

### Both (Recommended)
```bash
# Install extension from marketplace
code --install-extension baseline-lens.baseline-lens

# Install CLI globally
npm install -g baseline-lens-cli
```

## Feature Matrix

| Feature | Extension Only | CLI Only | Extension + CLI |
|---------|---------------|----------|-----------------|
| Real-time analysis | ✅ | ❌ | ✅ |
| Inline indicators | ✅ | ❌ | ✅ |
| Hover tooltips | ✅ | ❌ | ✅ |
| Problems panel | ✅ | ❌ | ✅ |
| Project reports | ✅ | ✅ | ✅ Enhanced |
| Git hooks | ❌ | ✅ | ✅ |
| CI/CD setup | Basic | ✅ | ✅ Enhanced |
| Smart config | ❌ | ✅ | ✅ |
| Terminal integration | ❌ | ✅ | ✅ |
| Framework detection | ❌ | ✅ | ✅ |

## Enhanced Features

When both tools are installed, you get additional capabilities:

### 1. CLI Status Integration

The extension automatically detects CLI availability:

- **Status Bar**: Shows CLI availability status
- **Commands**: Additional CLI commands appear in Command Palette
- **Smart Prompts**: Install suggestions when CLI features are accessed

### 2. Enhanced Commands

Access CLI features directly from VS Code:

#### **Baseline Lens: CLI Commands**
Opens a quick-pick menu with all CLI features:
- Project Analysis
- Git Hooks Setup
- CI/CD Configuration
- Smart Config Generation
- Terminal Access

#### **Baseline Lens: Analyze Project (CLI)**
Runs project-wide analysis using CLI:
```bash
# Equivalent CLI command
baseline-lens-cli analyze --changed-only
```

#### **Baseline Lens: Setup Git Hooks (CLI)**
Interactive git hooks setup:
- Pre-commit hooks for immediate feedback
- Pre-push hooks for broader validation
- Custom thresholds and failure levels

#### **Baseline Lens: Setup CI/CD (CLI)**
Generate CI/CD configurations:
- GitHub Actions
- GitLab CI
- Azure Pipelines
- Jenkins

#### **Baseline Lens: Generate Smart Config (CLI)**
Auto-detect project and generate optimal configuration:
- Framework detection (React, Vue, Angular, Svelte)
- Environment-specific settings
- Preview before applying

## Usage Workflows

### Development Workflow

1. **Real-time Feedback** (Extension)
   - Code with live compatibility indicators
   - Hover for detailed browser support info
   - Problems panel shows all issues

2. **Project Analysis** (CLI via Extension)
   - Run comprehensive project analysis
   - Generate detailed reports
   - Share results with team

3. **Team Setup** (CLI via Extension)
   - Configure git hooks for automatic checking
   - Set up CI/CD for build-time validation
   - Generate team configuration files

### CI/CD Integration Workflow

1. **Local Development**
   ```bash
   # Extension provides real-time feedback
   # CLI hooks prevent bad commits
   git commit -m "Add new feature"
   # 🔍 Running Baseline Lens compatibility check...
   # ✅ Compatibility check passed
   ```

2. **Continuous Integration**
   ```yaml
   # Generated by CLI via Extension
   - name: Baseline Lens Analysis
     run: baseline-lens-cli analyze --fail-on high --format junit
   ```

3. **Team Collaboration**
   ```bash
   # Shared configuration
   .baseline-lens.json  # Generated by CLI
   .git/hooks/pre-commit  # Set up via Extension
   ```

## Command Reference

### Extension Commands (Always Available)

| Command | Description | Shortcut |
|---------|-------------|----------|
| `Generate Baseline Report` | Create compatibility report | `Ctrl+Shift+B R` |
| `Refresh Analysis` | Re-analyze current files | `Ctrl+Shift+B A` |
| `Toggle Inline Indicators` | Show/hide indicators | `Ctrl+Shift+B I` |
| `Toggle Diagnostics` | Enable/disable Problems panel | - |
| `Open Settings` | Open extension settings | `Ctrl+Shift+B S` |

### CLI Integration Commands (When CLI Available)

| Command | Description | CLI Equivalent |
|---------|-------------|----------------|
| `CLI Commands` | Show CLI command menu | - |
| `Analyze Project (CLI)` | Project-wide analysis | `baseline-lens-cli analyze` |
| `Setup Git Hooks (CLI)` | Configure git hooks | `baseline-lens-cli init-hooks` |
| `Setup CI/CD (CLI)` | Generate CI/CD config | `baseline-lens-cli init-ci` |
| `Generate Smart Config (CLI)` | Auto-generate config | `baseline-lens-cli init-config` |

## Configuration

### Shared Configuration

Both tools can use the same configuration file:

```json
// .baseline-lens.json
{
  "supportThreshold": 90,
  "enabledAnalyzers": {
    "css": true,
    "javascript": true,
    "html": true
  },
  "excludePatterns": ["**/node_modules/**", "**/dist/**"],
  "customBrowserMatrix": [
    "chrome >= 90",
    "firefox >= 88",
    "safari >= 14"
  ]
}
```

### Extension-Specific Settings

VS Code settings for UI behavior:

```json
// settings.json
{
  "baseline-lens.showInlineIndicators": true,
  "baseline-lens.showDiagnostics": true,
  "baseline-lens.diagnosticSeverity": "warning"
}
```

## Best Practices

### 1. Development Setup

```bash
# Install both tools
npm install -g baseline-lens-cli
code --install-extension baseline-lens.baseline-lens

# Set up project
cd your-project
baseline-lens-cli init-config --preset react
baseline-lens-cli init-hooks --type pre-commit
```

### 2. Team Onboarding

1. **Share configuration**: Commit `.baseline-lens.json` to repository
2. **Document setup**: Include CLI installation in README
3. **Automate hooks**: Use CLI to set up git hooks for all team members

### 3. CI/CD Pipeline

```bash
# Generate CI/CD configuration
baseline-lens-cli init-ci --type github --changed-only

# The extension can also generate this via Command Palette:
# "Baseline Lens: Setup CI/CD (CLI)"
```

## Troubleshooting

### CLI Not Detected

**Problem**: Extension shows "CLI not installed" despite having CLI

**Solutions**:
1. Verify CLI installation: `baseline-lens-cli --version`
2. Restart VS Code after CLI installation
3. Check PATH environment variable

### Commands Not Appearing

**Problem**: CLI commands not visible in Command Palette

**Solutions**:
1. Reload VS Code window: `Ctrl+Shift+P` → "Developer: Reload Window"
2. Check extension activation: Look for "Baseline Lens" in status bar
3. Verify CLI detection: Click status bar item

### Terminal Integration Issues

**Problem**: CLI commands fail in integrated terminal

**Solutions**:
1. Ensure CLI is in PATH
2. Restart VS Code after CLI installation
3. Use external terminal if issues persist

## Migration Guide

### From Extension Only

1. Install CLI: `npm install -g baseline-lens-cli`
2. Restart VS Code
3. New CLI commands will appear automatically
4. Existing extension features remain unchanged

### From CLI Only

1. Install extension from VS Code Marketplace
2. Extension will detect existing CLI installation
3. CLI commands become available in VS Code
4. Existing CLI workflows remain functional

## Advanced Usage

### Custom Workflows

Create VS Code tasks that use CLI:

```json
// .vscode/tasks.json
{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Baseline Analysis",
      "type": "shell",
      "command": "baseline-lens-cli",
      "args": ["analyze", "--changed-only"],
      "group": "test",
      "presentation": {
        "echo": true,
        "reveal": "always"
      }
    }
  ]
}
```

### Keyboard Shortcuts

Add custom shortcuts for CLI features:

```json
// keybindings.json
[
  {
    "key": "ctrl+shift+b h",
    "command": "baseline-lens.setupGitHooks"
  },
  {
    "key": "ctrl+shift+b c",
    "command": "baseline-lens.setupCICD"
  }
]
```

## Support

- **Extension Issues**: [VS Code Extension Issues](https://github.com/kwesinavilot/baseline-lens/issues)
- **CLI Issues**: [CLI Issues](https://github.com/kwesinavilot/baseline-lens-cli/issues)
- **Documentation**: [User Guides](https://github.com/kwesinavilot/baseline-lens/docs)
- **Community**: [GitHub Discussions](https://github.com/kwesinavilot/baseline-lens/discussions)

---

**The perfect combination**: Real-time feedback in VS Code + powerful automation with CLI = Complete web compatibility solution! 🚀